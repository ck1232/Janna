<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.JJ.dao.RoleCustomDbObjectMapper">
	<resultMap id="rolesToAssignResultMap" type="com.JJ.controller.roleassignment.vo.RolesToAssignVO">
    <id column="roleid" jdbcType="INTEGER" property="roleid" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="checked" jdbcType="VARCHAR" property="checked" />
  </resultMap>
  <select id="getRolesToAssign" parameterType="String" resultMap="rolesToAssignResultMap">
  
  SELECT  r.role_id as "roleid",
  	  r.name as "name", 
  	  CASE WHEN ur.role_id is null THEN 'N' ELSE 'Y'
	  END As checked FROM role r 
	left join (select role_id from user_role where user_id = #{userid}) ur on r.role_id = ur.role_id

</select>
</mapper>